let clothing = [
  {
    name: "Navy Wife Beater",
    colour: "navy",
    cssColour: "navy",
    tags: ["Casual","Singlet"],
    tempEffect: -2,
    bodyPart: "torsoShirt",
    picItem : "SINGLET"
  },
  {
    name: "Black Wife Beater",
    colour: "black",
    cssColour: "black",
    tags: ["Casual","Singlet"],
    tempEffect: -2,
    bodyPart: "torsoShirt",
    picItem : "SINGLET"
  },
  {
    name: "White Wife Beater",
    colour: "white",
    cssColour: "white",
    tags: ["Casual","Singlet"],
    tempEffect: -2,
    bodyPart: "torsoShirt",
    picItem : "SINGLET"
  },
  {
    name: "White T-Shirt",
    colour: "white",
    cssColour: "white",
    tags: ["Casual", "Neat Casual", "Trendy"],
    tempEffect: 0,
    bodyPart: "torsoShirt",
    picItem : "TSHIRT"
  },
  {
    name: "White Striped T-Shirt",
    colour: "white",
    cssColour: "white",
    tags: ["Casual", "Neat Casual", "Trendy"],
    tempEffect: 0,
    bodyPart: "torsoShirt",
    picItem : "TSHIRT"
  },
  {
    name: "Blue T-Shirt w Palm Trees",
    colour: "blue",
    cssColour: "blue",
    tags: ["Casual", "Neat Casual", "Trendy"],
    tempEffect: 0,
    bodyPart: "torsoShirt",
    picItem : "TSHIRT"
  },
  {
    name: "Black T-Shirt",
    colour: "black",
    cssColour: "black",
    tags: ["Casual", "Neat Casual", "Trendy"],
    tempEffect: 0,
    bodyPart: "torsoShirt",
    picItem : "TSHIRT"
  },
  {
    name: "Thin Black T-Shirt",
    colour: "black",
    cssColour: "black",
    tags: ["Casual", "Neat Casual", "Trendy"],
    tempEffect: -2,
    bodyPart: "torsoShirt",
    picItem : "TSHIRT"
  },
  {
    name: "Green T-Shirt",
    colour: "green",
    cssColour: "green",
    tags: ["Casual", "Trendy"],
    tempEffect: 0,
    bodyPart: "torsoShirt",
    picItem : "TSHIRT"
  },
  {
    name: "Orange T-Shirt",
    colour: "orange",
    cssColour: "orange",
    tags: ["Casual", "Bold", "Trendy"],
    tempEffect: 0,
    bodyPart: "torsoShirt",
    picItem : "TSHIRT"
  },
  {
    name: "Maroon T-Shirt",
    colour: "maroon",
    cssColour: "maroon",
    tags: ["Casual", "Neat Casual", "Trendy"],
    tempEffect: 0,
    bodyPart: "torsoShirt",
    picItem : "TSHIRT"
  },
  {
    name: "Grey T-Shirt",
    colour: "gray",
    cssColour: "grey",
    tags: ["Casual"],
    tempEffect: 0,
    bodyPart: "torsoShirt",
    picItem : "TSHIRT"
  },
  {
    name: "Navy Polo",
    colour: "navy",
    cssColour: "navy",
    tags: ["Casual", "Neat Casual", "Trendy"],
    tempEffect: 1,
    bodyPart: "torsoShirt",
    picItem : "POLO"
  },
  {
    name: "Black Long Sleeve T-Shirt",
    colour: "black",
    cssColour: "black",
    tags: ["Casual", "Neat Casual", "Trendy"],
    tempEffect: 2,
    bodyPart: "torsoShirt",
    picItem : "LONGSLEEVE_SHIRT"
  },
  {
    name: "Green Long Sleeve T-Shirt",
    colour: "green",
    cssColour: "olive",
    tags: ["Casual", "Neat Casual", "Trendy"],
    tempEffect: 2,
    bodyPart: "torsoShirt",
    picItem : "LONGSLEEVE_SHIRT"
  },
  {
    name: "White Shirt w Red Dots",
    colour: "white",
    cssColour: "white",
    tags: ["Formal", "Neat Casual", "Trendy","Shirt"],
    tempEffect: 0,
    bodyPart: "torsoShirt",
    picItem : "SHIRT"
  },
  {
    name: "White Shirt",
    colour: "white",
    cssColour: "white",
    tags: ["Formal", "Neat Casual","Shirt"],
    tempEffect: 0,
    bodyPart: "torsoShirt",
    picItem : "SHIRT"
  },
  {
    name: "Blue Shirt w Navy Trim",
    colour: "blue",
    cssColour: "lightblue",
    tags: ["Formal", "Neat Casual", "Trendy","Shirt"],
    tempEffect: 0,
    bodyPart: "torsoShirt",
    picItem : "SHIRT"
  },
  {
    name: "Grey Hoodie",
    colour: "gray",
    cssColour: "darkgrey",
    tags: ["Casual"],
    tempEffect: 4,
    bodyPart: "torsoJumper",
    picItem : "HOODIE"
  },
  {
    name: "Thin Grey Hoodie",
    colour: "darkgray",
    cssColour: "lightgrey",
    tags: ["Casual"],
    tempEffect: 2,
    bodyPart: "torsoJumper",
    picItem : "HOODIE"
  },
  {
    name: "Purple Hoodie",
    colour: "purple",
    cssColour: "purple",
    tags: ["Casual"],
    tempEffect: 4,
    bodyPart: "torsoJumper",
    picItem : "HOODIE"
  },
  {
    name: "Maroon Sweater",
    colour: "maroon",
    cssColour: "maroon",
    tags: ["Casual"],
    tempEffect: 3,
    bodyPart: "torsoJumper",
    picItem : "SWEATER"
  },
  {
    name: "Blue Sweater",
    colour: "blue",
    cssColour: "blue",
    tags: ["Casual"],
    tempEffect: 3,
    bodyPart: "torsoJumper",
    picItem : "SWEATER"
  },
  {
    name: "Green Sweater",
    colour: "green",
    cssColour: "darkgreen",
    tags: ["Casual"],
    tempEffect: 3,
    bodyPart: "torsoJumper",
    picItem : "SWEATER"
  },
  {
    name: "Black Hooded Vest",
    colour: "black",
    cssColour: "black",
    tags: ["Casual", "Neat Casual", "Trendy"],
    tempEffect: 3,
    bodyPart: "torsoJumper",
    picItem : "HOODIEVEST"
  },
  {
    name: "Blue Paisley Shirt",
    colour: "blue",
    cssColour: "darkblue",
    tags: ["Casual", "Neat Casual", "Trendy"],
    tempEffect: 0,
    bodyPart: "torsoShirt",
    picItem : "SHIRT"
  },
  {
    name: "Light Blue Short Sleeve Shirt",
    colour: "blue",
    cssColour: "lightblue",
    tags: ["Casual", "Neat Casual"],
    tempEffect: -1,
    bodyPart: "torsoShirt",
    picItem : "POLO"
  },
  {
    name: "Grey Coat",
    colour: "gray",
    cssColour: "darkgrey",
    tags: ["Neat Casual"],
    tempEffect: 4,
    bodyPart: "torsoJacket",
    picItem : "JACKET"
  },
  {
    name: "Mustard Jacket",
    colour: "mustard",
    cssColour: "darkorange",
    tags: ["Casual","Neat Casual"],
    tempEffect: 2,
    bodyPart: "torsoJacket",
    picItem : "JACKET"
  },
  {
    name: "Black Jacket",
    colour: "black",
    cssColour: "black",
    tags: ["Casual","Neat Casual"],
    tempEffect: 2,
    bodyPart: "torsoJacket",
    picItem : "JACKET"
  },
  {
    name: "Black Leather Jacket",
    colour: "black",
    cssColour: "black",
    tags: ["Casual", "Neat Casual", "Bold"],
    tempEffect: 6,
    bodyPart: "torsoJacket",
    picItem : "JACKET"
  },
  {
    name: "Stone Shorts",
    colour: "gray",
    cssColour: "slategrey",
    tags: ["Casual", "Shorts"],
    tempEffect: -4,
    bodyPart: "legs",
    picItem : "SHORTS"
  },
  {
    name: "Striped Shorts",
    colour: "lightblue",
    cssColour: "paleblue",
    tags: ["Casual", "Shorts", "Trendy"],
    tempEffect: -4,
    bodyPart: "legs",
    picItem : "SHORTS"
  },
  {
    name: "Maroon Shorts",
    colour: "maroon",
    cssColour: "maroon",
    tags: ["Casual", "Shorts"],
    tempEffect: -4,
    bodyPart: "legs",
    picItem : "SHORTS"
  },
  {
    name: "Light Blue Shorts",
    colour: "lightblue",
    cssColour: "lightblue",
    tags: ["Casual", "Shorts"],
    tempEffect: -4,
    bodyPart: "legs",
    picItem : "SHORTS"
  },
  {
    name: "Blue Shorts",
    colour: "blue",
    cssColour: "blue",
    tags: ["Casual", "Shorts"],
    tempEffect: -4,
    bodyPart: "legs",
    picItem : "SHORTS"
  },
  {
    name: "Black Chinos",
    colour: "black",
    cssColour: "black",
    tags: ["Casual", "Neat Casual", "Bold", "Trendy"],
    tempEffect: 0,
    bodyPart: "legs",
    picItem : "PANTS"
  },
  {
    name: "Black Slacks",
    colour: "black",
    cssColour: "black",
    tags: ["Formal"],
    tempEffect: 0,
    bodyPart: "legs",
    picItem : "PANTS"
  },
  {
    name: "Blue Slacks",
    colour: "blue",
    cssColour: "blue",
    tags: ["Formal"],
    tempEffect: 0,
    bodyPart: "legs",
    picItem : "PANTS"
  },
  {
    name: "Blue Jeans",
    colour: "blue",
    cssColour: "blue",
    tags: ["Casual", "Trendy"],
    tempEffect: 0,
    bodyPart: "legs",
    picItem : "PANTS"
  },
  {
    name: "Blue Chinos",
    colour: "blue",
    cssColour: "darkblue",
    tags: ["Casual", "Neat Casual", "Bold", "Trendy"],
    tempEffect: 0,
    bodyPart: "legs",
    picItem : "PANTS"
  },
  {
    name: "Olive Chinos",
    colour: "olive",
    cssColour: "olive",
    tags: ["Casual", "Bold", "Trendy"],
    tempEffect: 0,
    bodyPart: "legs",
    picItem : "PANTS"
  },
  {
    name: "Tan Chinos",
    colour: "tan",
    cssColour: "tan",
    tags: ["Casual", "Neat Casual", "Trendy"],
    tempEffect: 0,
    bodyPart: "legs",
    picItem : "PANTS"
  },
  {
    name: "Converse Sneakers",
    colour: "black",
    cssColour: "black",
    tags: ["Casual", "Trendy", "Low Rise"],
    tempEffect: 0,
    bodyPart: "feet",
    picItem : "LOWTOPS"
  },
  {
    name: "Black Thongs",
    colour: "black",
    cssColour: "black",
    tags: ["Casual", "Thongs"],
    tempEffect: -4,
    bodyPart: "feet",
    picItem : "THONGS"
  },
  {
    name: "Blue Low Rise",
    colour: "blue",
    cssColour: "lightblue",
    tags: ["Casual", "Trendy", "Low Rise"],
    tempEffect: 0,
    bodyPart: "feet",
    picItem : "LOWTOPS"
  },
  {
    name: "Black Lace Ups",
    colour: "black",
    cssColour: "black",
    tags: ["Formal"],
    tempEffect: 0,
    bodyPart: "feet",
    picItem : "LOWTOPS"
  },
  {
    name: "Brown Boots",
    colour: "brown",
    cssColour: "saddlebrown",
    tags: ["Casual", "Trendy"],
    tempEffect: 0,
    bodyPart: "feet",
    picItem : "HIGHTOPS"
  },
  {
    name: "Black Hi Rise Sneakers",
    colour: "black",
    cssColour: "black",
    tags: ["Casual", "Trendy", "High Rise"],
    tempEffect: 1,
    bodyPart: "feet",
    picItem : "HIGHTOPS"
  },
  {
    name: "Converse Hi Tops",
    colour: "black",
    cssColour: "black",
    tags: ["Casual", "Trendy", "High Rise"],
    tempEffect: 0,
    bodyPart: "feet",
    picItem : "HIGHTOPS"
  },
  {
    name: "Black/Grey Scarf",
    colour: "black",
    cssColour: "black",
    tags: ["Casual", "Neat Casual", "Bold", "Trendy"],
    tempEffect: 4,
    bodyPart: "neck",
    picItem : "SCARF"
  },
  {
    name: "Striped Scarf",
    colour: "maroon",
    cssColour: "maroon",
    tags: ["Casual", "Neat Casual", "Trendy"],
    tempEffect: 4,
    bodyPart: "neck",
    picItem : "SCARF"
  },
  {
    name: "Blue Tie with Balloons",
    colour: "blue",
    cssColour: "navyblue",
    tags: ["Formal", "Trendy","Tie"],
    tempEffect: 0,
    bodyPart: "neck",
    picItem : "TIE"
  },
  {
    name: "Ray Bans",
    cssColour: "black",
    colour: "black",
    tags: ["Casual", "Formal", "Neat Casual", "Bold", "Trendy"],
    tempEffect: 0,
    bodyPart: "head",
    picItem : "GLASSES"
  },
  {
    name: "Orange Beanie",
    colour: "orange",
    cssColour: "orange",
    tags: ["Casual", "Bold", "Trendy"],
    tempEffect: 5,
    bodyPart: "head",
    picItem : "BEANIE"
  },
];
let todayTemp = 0;
let defaultTemperature = 22;
const neutrals = ["black", "gray", "white", "blue"];
let colourCombinations = [
  ["blue", "white"],
  ["gray", "black"],
  ["brown", "white"],
  ["brown", "maroon"],
  ["gray", "pink"],
  ["black", "white"],
  ["darkblue", "brown"],
  ["lightblue", "mustard"],
  ["gray", "beige", "lightblue"],
  ["green", "brown"],
  ["blue", "brown", "beige"],
  ["lightgray", "red"],
  ["blue", "brown", "maroon"],
  ["red", "blue", "mustard"],
  ["mustard", "brown", "blue"],
  ["red", "brown"],
  ["mustard", "blue", "rust"],
  ["purple", "blue", "mustard"],
  ['blue','green'],
  ['green','tan'],
  ['orange','grey'],
  ['orange','black']
];
let badCombinations = [
  ['red','green'],
  ['red','orange'],
  ['green','orange'],
  ['brown','black'],
  ['purple','yellow']
]
let wearing = {
  head: null,
  neck: null,
  torsoShirt: null,
  torsoJacket: null,
  torsoJumper: null,
  legs: null,
  feet: null,
  bodyTemperature: 0,
  setTemperature: function (temp) {
    this.bodyTemperature = temp;
  },
  resetAll: function() {
    this.setTemperature(todayTemp)
    document.getElementById('head').innerHTML='';
    document.getElementById('neck').innerHTML='';
    document.getElementById('torsoShirt').innerHTML='';
    document.getElementById('torsoJacket').innerHTML='';
    document.getElementById('torsoJumper').innerHTML='';
    document.getElementById('legs').innerHTML='';
    document.getElementById('feet').innerHTML='';
   if (this.head != null) document.getElementById(this.head.picItem).style.display = "none";
   if (this.neck != null) document.getElementById(this.neck.picItem).style.display = "none";
   if (this.torsoShirt != null) document.getElementById(this.torsoShirt.picItem).style.display = "none";
   if (this.torsoJacket != null) document.getElementById(this.torsoJacket.picItem).style.display = "none";
   if (this.torsoJumper != null) document.getElementById(this.torsoJumper.picItem).style.display = "none";
   if (this.legs != null) document.getElementById(this.legs.picItem).style.display = "none";
   if (this.feet != null) document.getElementById(this.feet.picItem).style.display = "none";
    this.head = null;
    this.neck = null;
    this.torsoShirt = null;
    this.torsoJacket = null;
    this.torsoJumper = null;
    this.legs = null;
    this.feet = null;
  },
  fashionRules: function(tempItem) {
    let mood = document.getElementById("mood").value
    if ((!tempItem.tags.includes(mood)) || 
    (tempItem.tags.includes("Singlet") && todayTemp < 38) || 
    (tempItem.tags.includes("Thongs") && todayTemp < 30) || 
    (tempItem.tags.includes("Shorts") && todayTemp < 28) || 
    (this.torsoShirt != null && tempItem.tags.includes("Tie") && !this.torsoShirt.tags.includes("Shirt")) || 
    (this.legs != null && tempItem.tags.includes("Thongs") && !this.legs.tags.includes("Shorts"))) {
      return true
    } else {
      return false
    }
  },
  createNeutralBase: function () {
    let iterator = 0;
    
    console.log(this.bodyTemperature - defaultTemperature)
    while (
      iterator < 100 &&
      (this.torsoShirt == null ||
        this.legs == null ||
        this.feet == null ||
        this.bodyTemperature - defaultTemperature > 6 ||
        this.bodyTemperature - defaultTemperature < -8)
    ) {
      let selectedItem = null;
      while (selectedItem == null) {
        let tempItem =clothing[Math.floor(Math.random(clothing.length) * clothing.length)];
        if (this.fashionRules(tempItem)) {
          tempItem = null;
        }
        
        if (tempItem != null) {
        if (this.bodyTemperature <= defaultTemperature) {//cold
          console.log(this.bodyTemperature-defaultTemperature)
          if (tempItem.tempEffect >= 0 && tempItem.tempEffect <= ((defaultTemperature-this.bodyTemperature))) {
            if (neutrals.includes(tempItem.colour)) {
              selectedItem = tempItem;
            }
          }
        } else {//hot
          if (tempItem.tempEffect <= 0 && tempItem.tempEffect >= ((defaultTemperature-this.bodyTemperature))) {
              if (neutrals.includes(tempItem.colour)) {
                selectedItem = tempItem;
              }       
          }
          }
        }
      }
      if (this[selectedItem.bodyPart] != null) {
        this.setTemperature(this.bodyTemperature -= this[selectedItem.bodyPart].tempEffect);
        if (this[selectedItem.bodyPart].hasOwnProperty("picItem")) {
          document.getElementById(this[selectedItem.bodyPart].picItem).style.display = "none";
        }
      }
      this[selectedItem.bodyPart] = selectedItem;
      if (selectedItem.hasOwnProperty("picItem")) {
        document.getElementById(selectedItem.picItem).style.display = "block";
        document.getElementById(selectedItem.picItem).style.fill = selectedItem.cssColour;
      }
      this.updateGUI(selectedItem.bodyPart,selectedItem.name)
      this.setTemperature(this.bodyTemperature + selectedItem.tempEffect);
      console.log(this);
      iterator++;
    }
  
  },
  addColour: function (compareItem) {
    let iterator = 0;
    let selectedItem = null;
    while (selectedItem == null) {
      let tempItem =
        clothing[Math.floor(Math.random(clothing.length) * clothing.length)];
        if (this.fashionRules(tempItem)) {
          tempItem = null;
        }
      if (this.bodyTemperature <= defaultTemperature) {//cold
        if (tempItem != null) {
          if (this[tempItem.bodyPart] != null) {
            if (tempItem.tempEffect == this[tempItem.bodyPart].tempEffect) {
          if (!neutrals.includes(tempItem.colour)) {
            if (compareItem == null) {
              selectedItem = tempItem;
            } else {
              for (let i = 0; i < colourCombinations.length; i++) {
                if (
                  colourCombinations[i].includes(compareItem.colour) == true &&
                  colourCombinations[i].includes(tempItem.colour) &&
                  tempItem.colour != compareItem.colour
                ) {
                  console.log(colourCombinations[i])
                  selectedItem = tempItem;
                  console.log(tempItem);
                  break;
                }
              }
            }
          }
            }
          }
        }
      } else {//hot
        if (tempItem != null) {
          if (this[tempItem.bodyPart] != null) {
            if (tempItem.tempEffect == this[tempItem.bodyPart].tempEffect) {
            if (!neutrals.includes(tempItem.colour)) {
              if (compareItem == null) {
                selectedItem = tempItem;
              } else {
                for (let i = 0; i < colourCombinations.length; i++) {
                  if (
                    colourCombinations[i].includes(compareItem.colour) ==
                      true &&
                    colourCombinations[i].includes(tempItem.colour)
                  ) {
                    for (let j = 0; j < badCombinations.length; j++) {
                      if (
                        badCombinations[j].includes(compareItem.colour) ==
                        false &&
                        !badCombinations[j].includes(tempItem.colour)
                      ) {
                        console.log(colourCombinations[i])
                        selectedItem = tempItem;
                        console.log(tempItem);
                        break;
                      }
                    }
                  }
                }
              }
            }       
            }
          }
        }
      }
      iterator++;
      if (iterator > 100) {
        break;
      }
    }
    if (selectedItem!= null) {
      if (this[selectedItem.bodyPart] != null) {
      if (this[selectedItem.bodyPart].hasOwnProperty("picItem")) {
        document.getElementById(this[selectedItem.bodyPart].picItem).style.display = "none";
      }
    }
    this[selectedItem.bodyPart] = selectedItem;
    if (selectedItem.hasOwnProperty("picItem")) {
      document.getElementById(selectedItem.picItem).style.display = "block";
      document.getElementById(selectedItem.picItem).style.fill = selectedItem.cssColour;
    }
    this.updateGUI(selectedItem.bodyPart,selectedItem.name)
    this.setTemperature(this.bodyTemperature + selectedItem.tempEffect);
    console.log(this);
    return selectedItem;
  }},
  updateGUI : function (bodyPart,clothing) {
    var li = document.getElementById(bodyPart).innerHTML = clothing;
  }
};

const getTemp = async () => {
  const response = await fetch(
    "https://api.open-meteo.com/v1/forecast?latitude=-35.066666&longitude=138.8500&daily=temperature_2m_max&timezone=GMT"
  );
  const tempMax = await response.json(); //extract JSON from the http response
  const response2 = await fetch(
    "https://api.open-meteo.com/v1/forecast?latitude=-35.066666&longitude=138.8500&daily=temperature_2m_min&timezone=GMT"
  );
  const tempMin = await response2.json(); //extract JSON from the http response
  const month = new Date().getMonth();
  switch (month) {//if summer then use temp high, if winter use temp low else use average
    case (0):
      case(1):
      case(2):
      case(11):
    todayTemp = tempMax.daily.temperature_2m_max[1]
    console.log('high')
    break;
      case(5):
      case(6):
      case(7):
      todayTemp = tempMin.daily.temperature_2m_min[1]
      console.log('low')
    break;
    default:
    todayTemp = Math.round(
      (tempMax.daily.temperature_2m_max[1] + tempMin.daily.temperature_2m_min[1]) / 2
    );
    console.log(month)
    break;
  }
  //todayTemp=31
  document.getElementById(
    "temp"
  ).innerHTML = `Today's Temperature: ${todayTemp}\u00B0c`;
  wearing.setTemperature(todayTemp);
  wearing.createNeutralBase();
  wearing.addColour(wearing.addColour());
};
function getAverage(arr) {
  let sum = 0;
  for (let i = 0; i < arr.length; i++) {
    sum += arr[i];
  }
  return sum / arr.length;
}

getTemp();


function generateOutfit() {
  wearing.resetAll();
  wearing.createNeutralBase();
  wearing.addColour(wearing.addColour());
};

function addSpice() {
  wearing.addColour(wearing.addColour());
};
//pair varying shades of complimentary colours opposite on colour wheel or different shades of the same color for a BOLD look
//let patterns by the focus and keep everything else muted
//for subdued choose a cool/warm color and then other neutral colors
//analogous color are three shades that sit next to each other with a primary or secondary color in the middle

//ideal is 2-3 colors no more
// Base color – 60-70% 2 items
// Black
// Grey
// White
// Brown
// Navy
// Complementary color – 20-30% 1 item
// Accent color – 5-10% 1 item

//navy+white,grey+black,green+khaki,brown+cream,brown+burgundy,grey+pink,black+white, dark blue+brown, light blue + mustard, grey +beige+light blue
//green+brown, blue+brown+beige, light grey+red, blue+ brown+maroon, red+blue+mustard, mustard+brown+blue, red+brown, mustard+blue+rust, purple+blue+mustard

//randomly select a body part
//randomly select a clothing item
//randomly select a body part
//match clothing item to other clothing item



